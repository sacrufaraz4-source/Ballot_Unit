<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVM Ballot Unit Simulator</title>

    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Use Inter font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #11427e;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem 1rem;
            overflow-y: auto;
        }

        .vote-button {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background-color: #CC0000;
            box-shadow: 0 4px #8B0000, 0 0 10px rgba(255, 0, 0, 0.5);
            transition: all 0.1s ease;
        }

        .vote-button:hover:not([disabled]) {
            background-color: #FF1A1A;
            box-shadow: 0 4px #990000, 0 0 15px rgba(255, 0, 0, 0.8);
            cursor: pointer;
        }

        .vote-button:active:not([disabled]) {
            transform: translateY(2px);
            box-shadow: 0 2px #8B0000, 0 0 5px rgba(255, 0, 0, 0.5);
        }

        .vote-button[disabled] {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .indicator-light {
            width: 0.75rem;
            height: 0.75rem;
            border-radius: 50%;
            background-color: #333;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        .light-on {
            background-color: #007bff;
            box-shadow: 0 0 15px #007bff, 0 0 5px rgba(0, 123, 255, 0.8);
        }

        .ready-light {
            width: 0.75rem;
            height: 0.75rem;
            border-radius: 50%;
            background-color: #00FF00;
            box-shadow: 0 0 10px #00FF00;
        }

        .message-box {
            z-index: 50;
        }

        .evm-body {
            border: 1px solid #c9c9c9;
            box-shadow:
                0 15px 30px rgba(0, 0, 0, 0.5),
                inset 0 0 15px rgba(255, 255, 255, 0.6);
            transform: perspective(1000px) rotateX(5deg) rotateY(0deg) rotateZ(1deg);
        }
    </style>
</head>

<body>

    <!-- Message Box Modal -->
    <div id="messageBox"
        class="message-box fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-70 hidden">
        <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full text-center">
            <h3 id="messageTitle" class="text-xl font-bold mb-3 text-green-600">
                VOTE CAST SUCCESSFULLY!
            </h3>
            <p id="messageText" class="mb-4 text-gray-700">
                Your vote has been recorded for the selected candidate.
            </p>
            <button onclick="closeMessageBox()"
                class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition duration-150 shadow-md">
                Close
            </button>
        </div>
    </div>

    <!-- Controls Panel -->
    <div class="mb-6">
        <button id="resetButton"
            onclick="resetBallot()"
            class="bg-yellow-500 text-gray-800 px-6 py-3 rounded-full font-bold shadow-lg hover:bg-yellow-400 transition duration-200 uppercase text-sm disabled:opacity-50"
            disabled>
            Reset Ballot
        </button>
    </div>

    <!-- EVM Container -->
    <div id="evmUnit" class="w-full max-w-xl bg-gray-100 rounded-3xl p-6 evm-body">

        <!-- Header -->
        <div class="flex justify-between items-center mb-5 border-b-2 border-gray-300 pb-3">
            <div class="flex items-center space-x-2 text-sm text-gray-600">
                <span class="font-bold text-gray-800">Ready</span>
                <div id="readyLight" class="ready-light"></div>
            </div>

            <span class="text-lg font-extrabold text-indigo-700 tracking-wider">BALLOT UNIT</span>
        </div>

        <!-- Candidate Table -->
        <div class="bg-white rounded-xl shadow-inner border border-gray-300 overflow-hidden">

            <div class="grid grid-cols-13 text-xs font-bold text-gray-600 bg-gray-200 border-b border-gray-300">
                <div class="col-span-1 p-2 border-r text-center">#</div>
                <div class="col-span-1 p-2 border-r text-center">Symbol</div>
                <div class="col-span-6 p-2 border-r">Candidate & Party</div>
                <div class="col-span-2 p-2 text-center border-r">Vote</div>

            <div id="candidate-list"></div>
        </div>

        <!-- Final Light -->
        <div class="mt-4 flex justify-end">
            <div id="confirmationPanel"
                class="w-16 h-8 bg-blue-400 rounded-lg flex items-center justify-center p-1 shadow-inner">
                <div id="finalLight" class="w-full h-full rounded-md bg-indigo-900 transition-all duration-1000"></div>
            </div>
        </div>
    </div>

    <script>
        const candidates = [
            { id: 1, name: "Candidate Alpha", symbol: "", imageSrc: "https://upload.wikimedia.org/wikipedia/commons/7/78/Indian_National_Congress_logo.svg" },
            { id: 2, name: "Candidate Alpha", symbol: "", imageSrc: "" },
            { id: 3, name: "Candidate Alpha", symbol: "", imageSrc: "" },
            { id: 4, name: "Candidate Alpha", symbol: "", imageSrc: "" },
            { id: 5, name: "Candidate Alpha", symbol: "", imageSrc: "" },
            { id: 6, name: "Candidate Alpha", symbol: "", imageSrc: "" },
            { id: 7, name: "Candidate Alpha", symbol: "", imageSrc: "" },
            { id: 8, name: "Candidate Alpha", symbol: "", imageSrc: "" },
        ];

        let voteCast = false;
        const resetButton = document.getElementById('resetButton');

        function renderCandidates() {
            const container = document.getElementById('candidate-list');
            container.innerHTML = '';

            candidates.forEach(candidate => {
                const row = `
                    <div id="row-${candidate.id}" class="grid grid-cols-13 items-center border-b border-gray-200 hover:bg-gray-50 transition duration-100">
                        <div class="col-span-1 p-3 text-sm text-gray-500 border-r text-center">${candidate.id}</div>
                        <div class="col-span-1 p-3 border-r flex justify-center">
                            ${candidate.imageSrc ? `<img src="${candidate.imageSrc}" alt="Symbol" class="w-8 h-8">` : `<span class="text-xl">${candidate.symbol}</span>`}
                        </div>
                        <div class="col-span-6 p-3 text-base font-medium text-gray-800 border-r">
                            ${candidate.name}
                        </div>
                        <div class="col-span-2 flex justify-center border-r">
                            <button id="btn-${candidate.id}" class="vote-button" onclick="castVote(${candidate.id})"></button>
                        </div>
                        <div class="col-span-3 flex justify-center">
                            <div id="light-${candidate.id}" class="indicator-light"></div>
                        </div>
                    </div>
                `;
                container.innerHTML += row;
            });

            resetButton.disabled = true;
        }

        function showMessageBox(message, title, isSuccess = true) {
            const titleElement = document.getElementById('messageTitle');
            const boxElement = document.getElementById('messageBox');

            titleElement.textContent = title;
            document.getElementById('messageText').textContent = message;

            titleElement.classList.toggle('text-green-600', isSuccess);
            titleElement.classList.toggle('text-red-600', !isSuccess);

            boxElement.classList.remove('hidden');
        }

        function closeMessageBox() {
            document.getElementById('messageBox').classList.add('hidden');
        }

        function castVote(candidateId) {
            if (voteCast) {
                showMessageBox("Ballot Locked!", "VOTING ALREADY COMPLETE", false);
                return;
            }

            voteCast = true;

            const clickedButton = document.getElementById(`btn-${candidateId}`);
            clickedButton.style.transform = 'translateY(2px)';
            clickedButton.style.boxShadow = '0 2px #8B0000, 0 0 5px rgba(255, 0, 0, 0.5)';

            const indicatorLight = document.getElementById(`light-${candidateId}`);
            indicatorLight.classList.add('light-on');

            document.querySelectorAll('.vote-button').forEach(button => {
                button.disabled = true;
                if (button.id !== `btn-${candidateId}`) {
                    button.style.transform = 'none';
                    button.style.boxShadow = '0 4px #8B0000, 0 0 10px rgba(255, 0, 0, 0.5)';
                }
            });

            resetButton.disabled = false;

            const finalLight = document.getElementById('finalLight');
            finalLight.classList.remove('bg-indigo-900');
            finalLight.classList.add('light-on');

            document.getElementById('readyLight').classList.remove('ready-light');
            document.getElementById('readyLight').classList.add('bg-gray-400');

            setTimeout(() => {
                const candidate = candidates.find(c => c.id === candidateId);
                showMessageBox(
                    `Vote recorded for Candidate #${candidate.id} (${candidate.symbol}). `,
                    "VOTE CAST SUCCESSFULLY!",
                    true
                );
            }, 500);
        }

        function resetBallot() {
            if (!voteCast) {
                showMessageBox("Ballot is Already Ready!", "NO VOTE CAST", false);
                return;
            }

            document.querySelectorAll('.indicator-light').forEach(light => {
                light.classList.remove('light-on');
            });

            const finalLight = document.getElementById('finalLight');
            finalLight.classList.remove('light-on');
            finalLight.classList.add('bg-indigo-900');

            document.querySelectorAll('.vote-button').forEach(button => {
                button.disabled = false;
                button.style.transform = 'none';
                button.style.boxShadow = '0 4px #8B0000, 0 0 10px rgba(255, 0, 0, 0.5)';
            });

            document.getElementById('readyLight').classList.remove('bg-gray-400');
            document.getElementById('readyLight').classList.add('ready-light');

            voteCast = false;
            resetButton.disabled = true;

            showMessageBox(
                "The ballot unit has been reset and is ready for a new vote.",
                "BALLOT RESET COMPLETE",
                true
            );
        }

        window.onload = renderCandidates;
    </script>
</body>
</html>
